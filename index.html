const firebaseConfig = {
        databaseURL: "https://notre-petit-coin-default-rtdb.europe-west1.firebasedatabase.app" 
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Tes listes de questions (le site choisira selon le jour du mois)
    const questionsMatin = ["Quelle est ta plus grande envie aujourd'hui ?", "Comment t'es-tu rÃ©veillÃ©(e) ce matin ?", "Un petit mot doux pour commencer la journÃ©e ?"];
    const questionsSoir = ["Quel a Ã©tÃ© ton moment prÃ©fÃ©rÃ© aujourd'hui ?", "De quoi es-tu fier/fiÃ¨re ce soir ?", "Qu'est-ce qu'on se dit avant de dormir ?"];

    const maintenant = new Date();
    const heure = maintenant.getHours();
    const jour = maintenant.getDate();
    
    // SÃ©lection des questions selon le jour
    const q1 = questionsMatin[jour % questionsMatin.length];
    const q2 = questionsSoir[jour % questionsSoir.length];

    const qList = document.getElementById('questions-list');
    document.getElementById('current-date').innerText = maintenant.toLocaleDateString();

    // AFFICHAGE DE LA QUESTION 1 (Visible dÃ¨s 6h)
    if (heure >= 6) {
        qList.innerHTML += `
            <div class="question-block">
                <small>â˜€ï¸ Question du Matin</small><br>
                <strong>${q1}</strong>
                <textarea id="rep1" placeholder="Ta rÃ©ponse..."></textarea>
            </div>`;
    } else {
        qList.innerHTML += `<p style="color:#aaa; font-style:italic;">La premiÃ¨re question arrive Ã  6h... ğŸ’¤</p>`;
    }

    // AFFICHAGE DE LA QUESTION 2 (Visible dÃ¨s 19h)
    if (heure >= 19 || heure < 6) { 
        qList.innerHTML += `
            <div class="question-block" style="border-left-color: #7209b7;">
                <small>ğŸŒ™ Question du Soir</small><br>
                <strong>${q2}</strong>
                <textarea id="rep2" placeholder="Ta rÃ©ponse..."></textarea>
            </div>`;
    } else {
        qList.innerHTML += `
            <div class="question-block" style="opacity: 0.5; border-left-color: #ccc;">
                <small>ğŸŒ™ Question du Soir</small><br>
                <p>Arrive Ã  19h00...</p>
            </div>`;
    }

    function envoyer() {
        const prenom = document.getElementById('mon-prenom').value;
        if(!prenom) return alert("Indique ton prÃ©nom !");
        
        const r1 = document.getElementById('rep1') ? document.getElementById('rep1').value : "";
        const r2 = document.getElementById('rep2') ? document.getElementById('rep2').value : "";

        if(!r1 && !r2) return alert("Ã‰cris au moins une rÃ©ponse !");

        database.ref('reponses').push({
            auteur: prenom,
            date: maintenant.toLocaleString(),
            reponseMatin: r1,
            reponseSoir: r2
        });
        alert("EnregistrÃ© â¤ï¸");
    }

    database.ref('reponses').limitToLast(8).on('value', (snapshot) => {
        const data = snapshot.val();
        let html = "";
        for (let id in data) {
            let contenu = "";
            if(data[id].reponseMatin) contenu += `â˜€ï¸ ${data[id].reponseMatin}<br>`;
            if(data[id].reponseSoir) contenu += `ğŸŒ™ ${data[id].reponseSoir}`;
            
            html = `<div class="res">
                        <strong>${data[id].auteur}</strong> <small>${data[id].date}</small><br>
                        ${contenu}
                    </div>` + html;
        }
        document.getElementById('reponses-flux').innerHTML = html;
    });
