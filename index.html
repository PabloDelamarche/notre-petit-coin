<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notre Rituel ‚ù§Ô∏è</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
        body { font-family: 'Poppins', sans-serif; background: #fff0f3; color: #444; text-align: center; padding: 20px; margin: 0; }
        .card { background: white; max-width: 500px; margin: 20px auto; padding: 30px; border-radius: 30px; box-shadow: 0 10px 30px rgba(255,182,193,0.3); position: relative; overflow: hidden; }
        h1 { color: #ff4d6d; font-size: 1.6rem; margin-bottom: 5px; }
        #current-date { display: block; margin-bottom: 20px; font-size: 0.85rem; color: #888; text-transform: capitalize; }
        .question-block { background: #fff5f6; margin: 15px 0; padding: 20px; border-radius: 20px; border-left: 6px solid #ff4d6d; text-align: left; transition: 0.3s; }
        .locked { opacity: 0.5; border-left-color: #ccc; background: #f9f9f9; }
        textarea { width: 100%; border: 1px solid #ddd; border-radius: 12px; padding: 12px; box-sizing: border-box; margin-top: 10px; resize: none; font-family: inherit; }
        input#mon-prenom { width: 100%; max-width: 300px; padding: 12px; border-radius: 15px; border: 1px solid #ddd; margin: 20px 0; text-align: center; font-size: 1rem; }
        button { background: #ff4d6d; color: white; border: none; padding: 15px 40px; border-radius: 50px; cursor: pointer; font-weight: 600; font-size: 1rem; width: 100%; max-width: 300px; transition: 0.3s; }
        button:hover { background: #ff758c; transform: translateY(-2px); }
        .res { font-size: 0.9rem; margin-bottom: 20px; text-align: left; background: #fff; padding: 15px; border-radius: 20px; border: 1px solid #ffe5ec; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .res strong { color: #ff4d6d; font-weight: 600; }
        .res small { color: #bbb; display: block; margin-bottom: 5px; }
        .heart { position: fixed; font-size: 20px; z-index: 999; pointer-events: none; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        hr { border: 0; border-top: 1px dashed #ffd1d1; margin: 30px 0; }
    </style>
</head>
<body>

<div class="card">
    <h1>‚ú® Notre Rituel</h1>
    <span id="current-date"></span>
    
    <div id="questions-list"></div>

    <input type="text" id="mon-prenom" placeholder="Ton petit nom...">
    <button onclick="envoyer()">Envoyer nos r√©ponses ‚ù§Ô∏è</button>

    <hr>
    <h3 style="color: #ff4d6d;">Nos souvenirs r√©cents</h3>
    <div id="reponses-flux">Chargement des mots doux...</div>
</div>

<script>
    // 1. CONFIGURATION (Remplacer si n√©cessaire)
    const firebaseConfig = {
        databaseURL: "https://notre-petit-coin-default-rtdb.europe-west1.firebasedatabase.app"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // 2. TES QUESTIONS M√âLANG√âES
    const questionsMatin = [
        "C'est quoi la connerie qu'on a faite ensemble qui te fait marrer en y repensant ?",
        "Si tu ne devais garder qu‚Äôun souvenir de moi ce serait lequel ?",
        "Quelle est ma manie la plus bizarre que tu as d√©couverte ?",
        "Budget illimit√© : qu‚Äôest-ce que tu m‚Äôach√®terais et t‚Äôach√®terais aussi ?",
        "Si je devais devenir une star, je serais c√©l√®bre pour quoi ?",
        "Quel est le plus beau compliment que je t‚Äôai fait ?",
        "Si je t‚Äôenvoie un message 'j‚Äôai merd√©', tu penses que ce serait sur quoi ?",
        "Si on √©tait des animaux, on serait quoi ?",
        "Quelle est la photo de nous deux que tu aimerais faire ?",
        "Quelle est la chose la plus courageuse que tu as faite cette ann√©e ?",
        "Pour toi, quelle est ma passion ?",
        "Si je finis en prison, ce serait pour quel motif ?",
        "Si on √©changeait nos corps pendant 24h, c'est quoi la premi√®re chose que tu ferais ?",
        "C‚Äôest quoi ton moment pr√©f√©r√© la derni√®re fois qu‚Äôon s‚Äôest vu ?",
        "Donne 3 mots pour d√©crire notre relation.",
        "Si tu devais te vanter de moi devant un inconnu, tu dirais quoi ?",
        "Si tu pouvais changer une seule chose dans ton quotidien, ce serait quoi ?",
        "Quelle est la petite chose que je fais et qui te fait craquer sans que je le sache ?",
        "Si on devait partir en voyage, tu partirais o√π ?",
        "Est-ce qu‚Äôil y a un message que je t‚Äôai envoy√© o√π tu t‚Äôes dit : 'aaah c‚Äôest pas le couteau le plus aiguis√© du tiroir' ?",
        "Une chose que je fais mieux que tout le monde ?",
        "Quel est mon plus gros d√©faut ?",
        "Si tu devais dispara√Ætre un temps pour n‚Äôimporte quelle raison, ce serait o√π ?",
        "Quelle est la recherche la plus √©trange que tu as faite sur Google r√©cemment ?",
        "Quel est le rituel √† distance que tu pr√©f√®res entre nous ?",
        "Je ressemble √† quoi comme cr√©ature moche ? (faut d√©velopper !)"
    ];

    const questionsSoir = [
        "Quel souvenir intime avec moi t‚Äôa le plus marqu√© ?",
        "Si on devait vivre nus dans une for√™t pendant une semaine, qui craquerait en premier ?",
        "Qu‚Äôest-ce qui te manque le plus chez moi quand on raccroche le soir ?",
        "Quel est l'endroit le plus insolite o√π tu aimerais qu'on le fasse ?",
        "Comment imagines-tu notre vie dans 10 ans pile ?",
        "Qu'est-ce qui te fait dire que 'c'est moi et personne d'autre' ?",
        "Quelle partie de mon corps te fait le plus d'effet quand je m'approche de toi ?",
        "Si tu pouvais m'ajouter une option 't√©l√©command√©e', quel bouton tu utiliserais le plus ?",
        "Quelle est la blessure du pass√© que j'ai r√©ussi √† apaiser chez toi ?",
        "C'est quoi le truc le plus bizarre qui t'excite un peu alors que √ßa ne devrait pas ?",
        "Quel est ton souvenir le plus doux de nous deux sous la couette ?",
        "Quelle est la pire chose que tu aies faite par jalousie ?",
        "Si on pouvait effacer un seul moment de notre pass√©, ce serait lequel ?",
        "Quel est ton pire 'tue-l'amour' que je poss√®de ?",
        "C'est quoi ta plus grande peur par rapport √† notre futur ?",
        "Si tu devais me confier une mission pour ton bonheur, ce serait quoi ?",
        "Quel est le moment o√π je t‚Äôai fait le plus rire ?",
        "Quelle est ta zone la plus sensible que je n'ai pas encore assez explor√©e √† ton go√ªt ?",
        "Si je devais te surprendre ce soir, je devrais faire quoi ?",
        "Quel est ton plus beau souvenir avec moi ?",
        "De quoi as-tu le plus besoin pour te sentir en s√©curit√© avec moi ?",
        "Quel est le r√™ve que tu n'as encore dit √† personne (sauf peut-√™tre √† moi) ?",
        "Quelle est la partie du corps que tu pr√©f√®res chez moi (√† part les yeux) ?",
        "Si on devait participer √† une √©mission de t√©l√©-r√©alit√©, laquelle choisirais-tu ?",
        "C'est quoi le secret que tu ne m'as pas dit parce que tu as peur que je te trouve trop bizarre ?",
        "Qu'est-ce que notre relation t'a appris sur toi-m√™me ?",
        "Si je te donnais un 'bon pour tout ce que tu veux' pendant une heure, tu l'utiliserais comment ?",
        "Quelle est ta plus grande peur en amour ?",
        "Comment tu me vois dans 10 ans ?",
        "Si c'√©tait √† refaire, qu'est-ce que tu changerais ?"
    ];

    const maintenant = new Date();
    const heure = maintenant.getHours();
    const jour = maintenant.getDate();
    document.getElementById('current-date').innerText = maintenant.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });

    // 3. AFFICHAGE DYNAMIQUE
    const qList = document.getElementById('questions-list');
    const q1 = questionsMatin[jour % questionsMatin.length];
    const q2 = questionsSoir[jour % questionsSoir.length];

    let html = `<div class="question-block">
        <small>‚òÄÔ∏è Ce matin...</small><br>
        <strong>${q1}</strong>
        <textarea id="rep1" rows="2" placeholder="√âcris ici..."></textarea>
    </div>`;

    if (heure >= 19 || heure < 6) {
        html += `<div class="question-block" style="border-left-color: #7209b7;">
            <small>üåô Ce soir...</small><br>
            <strong>${q2}</strong>
            <textarea id="rep2" rows="2" placeholder="√âcris ici..."></textarea>
        </div>`;
    } else {
        html += `<div class="question-block locked">
            <small>üåô Ce soir...</small><br>
            <strong>La question arrive √† 19h00...</strong>
        </div>`;
    }
    qList.innerHTML = html;

    // 4. LOGIQUE D'ENVOI
    function envoyer() {
        const prenom = document.getElementById('mon-prenom').value;
        const r1 = document.getElementById('rep1') ? document.getElementById('rep1').value : "";
        const r2 = document.getElementById('rep2') ? document.getElementById('rep2').value : "";

        if (!prenom) return alert("Indique ton pr√©nom !");
        if (!r1 && !r2) return alert("√âcris au moins une petite r√©ponse ‚ù§Ô∏è");

        database.ref('reponses').push({
            auteur: prenom,
            date: maintenant.toLocaleDateString('fr-FR'),
            h: maintenant.toLocaleTimeString('fr-FR', {hour: '2-digit', minute:'2-digit'}),
            m: r1,
            s: r2
        });

        if(document.getElementById('rep1')) document.getElementById('rep1').value = "";
        if(document.getElementById('rep2')) document.getElementById('rep2').value = "";
        
        createHearts(); // Petite animation
        alert("C'est envoy√© ! ‚ù§Ô∏è");
    }

    // 5. ANIMATION COEURS
    function createHearts() {
        for(let i=0; i<15; i++) {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerText = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }
    }

    // 6. RECUPERATION DES MESSAGES
    database.ref('reponses').limitToLast(10).on('value', (snapshot) => {
        const data = snapshot.val();
