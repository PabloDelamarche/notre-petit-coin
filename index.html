<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notre Rituel ‚ù§Ô∏è</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #fff0f3; text-align: center; padding: 20px; }
        .card { background: white; max-width: 500px; margin: 0 auto; padding: 20px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .question-block { background: #fff5f6; margin: 10px 0; padding: 15px; border-radius: 10px; border-left: 5px solid #ff4d6d; text-align: left; }
        textarea { width: 100%; margin-top: 10px; border: 1px solid #ddd; border-radius: 5px; padding: 8px; box-sizing: border-box; }
        input { width: 80%; padding: 10px; margin: 10px 0; border-radius: 10px; border: 1px solid #ddd; }
        button { background: #ff4d6d; color: white; border: none; padding: 15px; border-radius: 50px; cursor: pointer; width: 80%; font-weight: bold; }
        .res { background: #f9f9f9; padding: 10px; margin-top: 10px; border-radius: 10px; text-align: left; border: 1px solid #eee; }
    </style>
</head>
<body>

<div class="card">
    <h1>‚ú® Notre Rituel</h1>
    <div id="questions-list">Chargement des questions...</div>
    <input type="text" id="mon-prenom" placeholder="Ton pr√©nom">
    <button onclick="envoyer()">Envoyer ‚ù§Ô∏è</button>
    <hr>
    <div id="reponses-flux">En attente de messages...</div>
</div>

<script>
    // 1. CONFIGURATION (VERIFIE BIEN CETTE URL)
    const firebaseConfig = {
        databaseURL: "https://notre-petit-coin-default-rtdb.europe-west1.firebasedatabase.app"
    };
    
    try {
        firebase.initializeApp(firebaseConfig);
        var database = firebase.database();
    } catch (e) {
        document.getElementById('questions-list').innerHTML = "Erreur Firebase : " + e.message;
    }

    const qMatin = "Comment te sens-tu en cette fin de soir√©e ?";
    const qSoir = "Qu'est-ce qu'on se dit avant de dormir ?";

    // Affichage forc√© pour le test
    document.getElementById('questions-list').innerHTML = `
        <div class="question-block">
            <strong>‚òÄÔ∏è Question 1 :</strong><br>${qMatin}
            <textarea id="rep1"></textarea>
        </div>
        <div class="question-block">
            <strong>üåô Question 2 :</strong><br>${qSoir}
            <textarea id="rep2"></textarea>
        </div>
    `;

    function envoyer() {
        const p = document.getElementById('mon-prenom').value;
        const r1 = document.getElementById('rep1').value;
        const r2 = document.getElementById('rep2').value;

        if (!p) return alert("Pr√©nom oubli√© !");

        database.ref('reponses').push({
            auteur: p,
            matin: r1,
            soir: r2,
            date: new Date().toLocaleString()
        }).then(() => {
            alert("Envoy√© !");
            document.getElementById('rep1').value = "";
            document.getElementById('rep2').value = "";
        }).catch(err => alert("Erreur : " + err.message));
    }

    database.ref('reponses').limitToLast(5).on('value', (snap) => {
        const data = snap.val();
        let html = "";
        for (let id in data) {
            html = `<div class="res"><strong>${data[id].auteur}</strong> : ${data[id].matin} | ${data[id].soir}</div>` + html;
        }
        document.getElementById('reponses-flux').innerHTML = html;
    });
</script>
</body>
</html>
